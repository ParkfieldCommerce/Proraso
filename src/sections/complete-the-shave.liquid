<!-- sections/complete-the-shave.liquid -->
{% assign GiftPopup = section.settings %}
{% if GiftPopup.enable_freegift %}
<div id="Gift" class="Gift__popup js-GiftPopup popup overlay">
  <div class="popup-inner">
    <div class="popup-content">
      <div class="Gift__header">
        <h2 class="Gift__header__heading">{{GiftPopup.heading}}</h2>
        <a href="#close" class="Gift__close js-giftClose" aria-label="{{ 'common.close' | t }}">
          {% include 'custom-icon' with icon:'close' %}
        </a>
      </div>
      <div class="Gift__popup-content js-giftContent">
        <div class="Gift__requirements">
          {% for block in section.blocks %}
          {% assign requirement = block.settings %}
          <div class="Gift__requirement Gift__requirement--invalid">
            <img class="Gift__requirement__image--bought" src="{{requirement.bought_image | img_url:'master'}}" alt="{{requirement.bought_image.alt}}">
            <img class="Gift__requirement__image--unbought" src="{{requirement.unbought_image | img_url:'master'}}" alt="{{requirement.unbought_image.alt}}">
            <span class="Gift__requirement__label">{{requirement.label}}</span>
            <a class="Gift__requirement__button Btn" href="{{requirement.url}}">SHOP</a>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  var giftPopup = new Focus('#Gift');
  giftPopup.show();
  $('.js-giftClose').click(function(e){
    e.preventDefault();
    giftPopup.hide();
  });
</script>
{% endif %}
{% schema %}
{
  "name": "Complete the Shave",
  "class":"complete-the-shave",
  "settings":[
    {
      "type":"checkbox",
      "id":"enable_freegift",
      "label":"Enable Complete the Shave Popup?"
    },
    {
      "type":"text",
      "id":"heading",
      "label":"Heading"
    },
    {
      "type":"textarea",
      "id":"desktop_body",
      "label":"Body Text for Desktop"
    }
  ],
  "blocks":[
    {
      "type":"requirement",
      "name":"Requirement",
      "limit":3,
      "settings":[
        {
          "type":"product",
          "id":"product",
          "label":"Type of Product",
          "info":"Choose the type of product"
        },
        {
          "type":"image_picker",
          "label":"Unbought Image",
          "id":"unbought_image"
        },
        {
          "type":"image_picker",
          "label":"Bought Image",
          "id":"bought_image"
        },
        {
          "type":"text",
          "label":"Image Label",
          "id":"label"
        },
        {
          "type":"url",
          "label":"Shop Link URL",
          "id":"url"
        }
      ]
    }
  ]
}
{% endschema %}